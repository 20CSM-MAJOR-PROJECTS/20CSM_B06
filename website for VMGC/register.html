<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h2>ISRO Documentaries Hub</h2>
    </header>

<form id="registrationForm" method="get" onsubmit="handleSubmit(event)">
    <h4>Please enter your details</h4>
    
    <label for="firstName">First Name:<span class="required">*</span></label>
    <input type="text" id="firstName" name="firstName" placeholder="John" required maxlength="15" pattern="[a-zA-Z0-9]+" title="Only alphanumeric characters allowed">
    
    <label for="lastName">Last Name:<span class="required">*</span></label>
    <input type="text" id="lastName" name="lastName" placeholder="Doe" required maxlength="15" pattern="[a-zA-Z0-9]+" title="Only alphanumeric characters allowed">

    <label for="email">Email:<span class="required">*</span></label>
    <input type="email" id="email" name="email" placeholder="johndoe@gmail.com" required>
    
    
    <button type="button" onclick="verifyEmail()" id="verify">Verify</button>
    <br>
    <input type="text" id="otp" name="otp" placeholder="Enter OTP" style="display: none;">

    <label for="username">Username:<span class="required">*</span></label>
    <input type="text" id="username" name="username" placeholder="John9704" required pattern="[a-zA-Z0-9]{8,12}" title="Alphanumeric, 8-12 characters"> 

    <label for="password">Password:<span class="required">*</span></label>
    <div class="password">
    <input type="password" id="password" name="password" placeholder="Your secret"required pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*[%,~!@#$^*=+?_[]{}])(?!.*[firstnamelastname]).{8,14}" title="Password must contain at least one lowercase, one uppercase, one special character, and be 8-14 characters long">
    <img src="pass-hide.png" onclick="pass()" class="pass-icon" id="pass-icon">
</div>

    <label for="confirmPassword">Confirm Password:<span class="required">*</span></label>
    <div class="password">
        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Re-enter your secret" required>
        <img src="pass-hide.png" onclick="togglePassword('confirmPassword')" class="pass-icon" id="confirmPass-icon">
    </div>

    <label for="profilePic">Profile Picture:<span class="required">*</span></label>
    <input type="file" id="profilePic" name="profilePic" accept="image/*" required> 
    
    
    <label for="privilege">Privilege:<span class="required">*</span></label>
    <select id="privilege" name="privilege" required>
        <option value="" disabled>Select Privilege</option>
        <option value="admin">Admin</option>
        <option value="isroUser">ISRO User</option>
        <option value="generalUser">General User</option>
    </select>
    <br>

    <!-- reCAPTCHA integration -->
    
    <button type="submit" id="register">Sign-Up</button>
    <p id="errorMessage" class="error-message"></p>
</form>
<footer>
    <h4><p>&copy <a href="about.html">All Rights Reserved.</a></p></h4>
</footer>

<script>
    var a;
    function pass() {
        if(a==1){
            document.getElementById('password').type='password';
            document.getElementById('pass-icon').src='pass-hide.png';
            a=0;
        }
        else{
            document.getElementById('password').type='text';
            document.getElementById('pass-icon').src='pass-show.png';
            a=1;
        }
    }
    var b;
    function togglePassword(confirmPassword) {
        if(b==1){
        document.getElementById('confirmPassword').type='password';
        document.getElementById('confirmPass-icon').src='pass-hide.png';
        b=0;
        }
        else{
            document.getElementById('confirmPassword').type='text';
            document.getElementById('confirmPass-icon').src='pass-show.png';
            b=1;
        }
    }
        
    
    function verifyEmail() {
        // Implement email verification logic (e.g., send OTP to the user's email)
        document.getElementById('otp').style.display = 'block';
    }

    function handleSubmit(event) {
        // Implement client-side registration logic (validate fields, handle errors, etc.)
        // If successful registration, redirect to the login page.
        // If registration fails, show an error message.
        var errorMessage = document.getElementById('errorMessage');

        // Example: Check if passwords match
        var password = document.getElementById('password').value;
        var confirmPassword = document.getElementById('confirmPassword').value;

        if (password !== confirmPassword) {
            errorMessage.textContent = 'Passwords do not match.';
            return;
        }

        // Implement other validations as needed

        // If all validations pass, reset error message and proceed with registration logic
        errorMessage.textContent = '';
        event.preventDefault();

        // Get the selected privilege
        const privilege = document.getElementById('privilege').value;

        if (privilege) {
            console.log('Selected Privilege:', privilege);

            // Add your registration logic here
        } else {
            alert('Please select a privilege.');
        }

        // Example: Redirect to login page
        window.location.href = 'login.html';
    }
</script>

</body>
</html>
